<div xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/1999/xhtml ../../schema/xhtml1-strict.xsd" xmlns="http://www.w3.org/1999/xhtml">

<h2>Processing Request Details</h2>

<p>
Each request includes one or more details that specify what is being requested.
Each entry on the details list contains a type, and either a code or a reference 
to a resource that provides more details.
</p>
<p>
The type determines how the request details should be understood. It is a URI that 
comes from this list:
</p>
<table class="codes">
  <tr><th>URI</th><th>Meaning</th></tr>
  <tr><td>http://hl7.org/fhir/request/lab</td><td>
     A request to perform a laboratory test. 
     <ul>
	   <li>The code identifies the laboratory test</li>
	   <li>There is no reference</li>
       <li>bodySite may be used, usually for histopathology requests</li>
	   <li>The response may include references to one or more <a href="labreport.htm">Lab Report</a> resources that provide the results</li>
	 </ul>
	 Local work flow arrangements will determine whether the laboratory handles a request by waiting for a specimen, or for the patient, or by visting the patient directly to obtain the specimen (i.e. phlebotomy ward round).
	 
	</td></tr>
  <tr><td>http://hl7.org/fhir/request/imaging</td><td>
     A request to perform an imaging examination. 
     <ul>
	   <li>The code identifies the modality, and may include the bodySite</li>
       <li>bodySite may be used if the code does not specify the body site implicitly</li>
	   <li>There is no reference</li>
	   <li>The response may include references to one or more Imaging Report resources that provide the results</li>
	 </ul>
	</td></tr>
  <tr><td>http://hl7.org/fhir/request/prescription</td><td>
     A request to fulfill a prescription
     <ul>
	   <li>The code and bodySite are not used</li>
       <li>The reference points to a rescription resource</li>
	   <li>The response may include references to one or more <a href="medicationadministration.htm">administration</a> or supply resources</li>
	 </ul>
	 Note that while prescriptions are implicitly a request for real world action, many systems that 
	 have nothing to do with actually fulfilling prescriptions store and process prescriptions records.
	</td></tr>
  <tr><td></td><td></td></tr>  
</table>

<p>
Alternatively, the URI may be a reference to a definition of a request type. The 
request type definition must describe the request, how the code, reference, and 
bodySite elements should be understood, and what references the response 
should contain.
</p>

<p>
Note that a resource may only be the reference of a request if the resource 
explicitly defines how it is known to be something requested, as opposed 
to (for instance) something that has happened. For some resources, such 
as a prescription, this is defined to be always true, while other resources 
may have some kind of status element for this purpose. If the resource does 
not explicitly define this, then it cannot be the target of a request.
</p>

<h2>Auction Protocol</h2>

<p>
The request and response resources can be used in an auction context, where the 
request will actually be offered to multiple service providers, and then fulfilled
by a single provider based on some criteria determined from their responses. The 
auction protocol may be implemented explicitly by the end user and provider of 
the request/response, or, in some cases, it may be implemented (partially) 
transparently by a broker system that sits between them.
</p>
<p>
In the auction protocol, the request is created without a specified target 
provider that is intended to fulfill the request. This request is passed to 
multiple target systems that provide a response based on the service and 
cost they are prepared to provide. The source or broker selects a preferred
provider based on the information provided, updates the target provider on 
the request, and then resends the request to the original target systems, which
know whether or not they are the winner of the auction by the target system
value.
</p>
<p>
The auction protocol can be implemented either in a restful context, or using
messaging exchange.
</p>


</div>
